@{
    ViewData["Title"] = "DepartmentEmployee";
    Layout = "~/Views/Layout/LayoutAdmin.cshtml";
}
<!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<!-- fullCalendar -->
<link rel="stylesheet" href="~/css/ManageEmployee/calendar.css">
 <!-- Theme style -->

<link rel="stylesheet" href="~/css/ManageEmployee/adminlte.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">


<!-- Content Header (Page header) -->


<!-- Main content -->

<section class="content">
    <div class="container-fluid">
        <h5 style="font-family:comfortaa; color: black; padding: 5px 6px" class="font-weight-bold">Calender</h5>
    <div class="row">
        <div class="col-md-0">
            <div class="sticky-top mb-3">
            <div class="container mt-3">
                <h3>Dismissible Popover</h3>
                <a href="#" title="Dismissible popover" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-content="Click anywhere in the document to close this popover">Click me</a>
            </div>
        </div>   
        </div>
        <!-- /.col -->
        <div class="col-md">
        <div class="card card-primary">
            <div class="card-body p-0">
            <!-- THE CALENDAR -->
                <div id="calendar"></div>
            </div>
            <!-- /.card-body -->
        </div>
        <!-- /.card -->
        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->
    </div><!-- /.container-fluid -->
</section>
<!-- /.content -->

@*<script src="~/js/ManageEmployee/ActivityCalendar.js"></script>*@
<!-- jQuery UI -->
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js" integrity="sha256-hlKLmzaRlE8SCJC1Kw8zoUbU8BxA+8kR3gseuKfMjxA=" crossorigin="anonymous"></script>
<!-- fullCalendar 2.2.5 -->
<script src="~/js/ManageEmployee/moment.min.js"></script>
<script src="~/js/ManageEmployee/Calendar.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,dayGridWeek,dayGridDay'
            },
            themeSystem: 'bootstrap',
            lazyFetching: false,
            eventDidMount: function (info) {
                // Use Bootstrap v5 Popover
                new bootstrap.Popover(info.el, {
                    title: info.event.extendedProps.description,
                    content: info.event.title,
                    placement: 'bottom',
                    trigger: 'hover', // This should work in Bootstrap v5
                    container: 'body',
                });
            },
            events: function (info, successCallback, failureCallback) {
                let start = moment(info.start.valueOf()).format('YYYY-MM-DD');
                let end = moment(info.end.valueOf()).format('YYYY-MM-DD');
                $.ajax({
                    url: "https://localhost:7177/api/TimeSheet/TimeSheetByMonth" + '?start=' + start + "&end=" + end,
                    type: 'GET',
                    headers: {
                        Authorization: "Bearer " + sessionStorage.getItem("Token")
                    },
                    success: function (response) {
                        successCallback(response);
                    },
                });
            },
            extraParams: function () {
                return {
                    cachebuster: new Date().valueOf()
                };
            },
            editable: false,
            droppable: true,
        });

        calendar.render();
    });
</script>